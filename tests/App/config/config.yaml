services:
    _defaults:
        autowire: true
        autoconfigure: true
    BugCatcher\Tests\App\:
        resource: '../'
        exclude:
            - '../config/'
            - '../Factory/'
            - '../Entity/'
            - '../src/Kernel.php'
            - '../src/KernelTestCase.php'
    BugCatcher\Command\PingCollectorCommand:
        arguments:
            $collectors:
                http: '@BugCatcher\Service\PingCollector\HttpPingCollector'
                messenger: '@BugCatcher\Service\PingCollector\MessengerCollector'
                cron-v2: '@BugCatcher\Tests\App\Service\CronPingCollector'
bug_catcher:
    logo: 'default'
    collectors:
        Http: http
        Messenger: messenger
        Cron 2: cron-v2
        None: none
    refresh_interval: 5
    dashboard_list_items:
        - BugCatcher\Entity\RecordLog
        - BugCatcher\Entity\RecordLogTrace
        - App\Entity\RecordCron
    detail_components:
        BugCatcher\Entity\RecordLogTrace:
            - 'Detail:Header'
            - 'Detail:Title'
            - 'Detail:HistoryList'
            - 'Detail:StackTrace'
        BugCatcher\Entity\RecordLog:
            - 'Detail:Header'
            - 'Detail:Title'
            - 'Detail:HistoryList'
        App\Entity\RecordCron:
            - 'Detail:Header'
            - 'Detail:Title'
            - 'Detail:HistoryList'
    roles:
        Admin: ROLE_ADMIN
        Developer: ROLE_DEVELOPER
        User: ROLE_USER
        Customer: ROLE_CUSTOMER
        Full Page Reload: ROLE__FULL_PAGE_RELOAD
doctrine:
    dbal:
        url: '%env(resolve:DATABASE_URL)%'

        # IMPORTANT: You MUST configure your server version,
        # either here or in the DATABASE_URL env var (see .env file)
        #server_version: '16'

        profiling_collect_backtrace: '%kernel.debug%'
        use_savepoints: true
    orm:
        auto_generate_proxy_classes: true
        enable_lazy_ghost_objects: true
        report_fields_where_declared: true
        validate_xml_mapping: true
        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware
        auto_mapping: true
        mappings:
            App:
                type: attribute
                is_bundle: false
                dir: '%kernel.project_dir%/tests/App/Entity'
                prefix: 'BugCatcher\Tests\App\Entity'
                alias: App
            BugCatcherBundle:
                type: xml
                dir: '%kernel.project_dir%/tests/App/config/doctrine/BugCatcherBundle/'
                prefix: 'BugCatcher\Entity'
                alias: PhpSentinelBundle
        controller_resolver:
            auto_mapping: false
        dql:
            string_functions:
                TYPE: BugCatcher\Extension\DQL\TypeFunction
security:
    password_hashers:
        Symfony\Component\Security\Core\User\PasswordAuthenticatedUserInterface: 'auto'
    firewalls:
        api:
            pattern: ^/api/
            stateless: true
framework:
    test: true
    secret: '%env(APP_SECRET)%'
    assets:
        packages:
            bug_catcher:
                json_manifest_path: '%kernel.project_dir%/public/manifest.json'
when@test:
    doctrine:
        dbal:
            # "TEST_TOKEN" is typically set by ParaTest
            dbname_suffix: '_test%env(default::TEST_TOKEN)%'
twig:
    globals:
        app_name: 'Bug Catcher'
        logo: 'default'
api_platform:
    title: Hello API Platform
    version: 1.0.0
    formats:
        jsonld: [ 'application/ld+json' ]
        json: [ 'application/json' ]
    docs_formats:
        jsonld: [ 'application/ld+json' ]
        jsonopenapi: [ 'application/vnd.openapi+json' ]
        html: [ 'text/html' ]
    defaults:
        stateless: true
        cache_headers:
            vary: [ 'Content-Type', 'Authorization', 'Origin' ]
        extra_properties:
            standard_put: true
            rfc_7807_compliant_errors: true
    keep_legacy_inflector: false
    use_symfony_listeners: true
    mapping:
        paths:
            - '%kernel.project_dir%/src/Entity'
            - '%kernel.project_dir%/tests/App/Entity'
    swagger:
        api_keys:
            # overridden in OpenApiFactoryDecorator
            access_token:
                name: Authorization
                type: header
