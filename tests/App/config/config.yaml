services:
    _defaults:
        autowire: true
        autoconfigure: true
    PhpSentinel\BugCatcher\Tests\App\:
        resource: '../'
        exclude:
            - '../config/'
            - '../Factory/'
            - '../Entity/'
            - '../src/Kernel.php'
            - '../src/KernelTestCase.php'
bug_catcher:
    logo: 'default'
doctrine:
    dbal:
        url: '%env(resolve:DATABASE_URL)%'

        # IMPORTANT: You MUST configure your server version,
        # either here or in the DATABASE_URL env var (see .env file)
        #server_version: '16'

        profiling_collect_backtrace: '%kernel.debug%'
        use_savepoints: true
    orm:
        auto_generate_proxy_classes: true
        enable_lazy_ghost_objects: true
        report_fields_where_declared: true
        validate_xml_mapping: true
        naming_strategy: doctrine.orm.naming_strategy.underscore_number_aware
        auto_mapping: true
        mappings:
            App:
                type: attribute
                is_bundle: false
                dir: '%kernel.project_dir%/src/Entity'
                prefix: 'App\Entity'
                alias: App
        controller_resolver:
            auto_mapping: false
        dql:
            string_functions:
                TYPE: PhpSentinel\BugCatcher\Extension\DQL\TypeFunction
security:
    password_hashers:
        Symfony\Component\Security\Core\User\PasswordAuthenticatedUserInterface: 'auto'
    firewalls:
        api:
            pattern: ^/api/
            stateless: true
framework:
    test: true
    secret: '%env(APP_SECRET)%'
    assets:
        packages:
            bug_catcher:
                json_manifest_path: '%kernel.project_dir%/public/manifest.json'
when@test:
    doctrine:
        dbal:
            # "TEST_TOKEN" is typically set by ParaTest
            dbname_suffix: '_test%env(default::TEST_TOKEN)%'
twig:
    globals:
        app_name: 'Bug Catcher'
        logo: 'default'
api_platform:
    title: Hello API Platform
    version: 1.0.0
    formats:
        jsonld: [ 'application/ld+json' ]
        json: [ 'application/json' ]
    docs_formats:
        jsonld: [ 'application/ld+json' ]
        jsonopenapi: [ 'application/vnd.openapi+json' ]
        html: [ 'text/html' ]
    defaults:
        stateless: true
        cache_headers:
            vary: [ 'Content-Type', 'Authorization', 'Origin' ]
        extra_properties:
            standard_put: true
            rfc_7807_compliant_errors: true
    keep_legacy_inflector: false
    use_symfony_listeners: true
    swagger:
        api_keys:
            # overridden in OpenApiFactoryDecorator
            access_token:
                name: Authorization
                type: header
